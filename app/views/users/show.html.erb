<%= javascript_include_tag 'home_page' %>
<script type="text/javascript" charset="utf-8">
  var storiesArray = <%=raw @stories_for_js%>
</script>

<div class="story-box">
 <h2>Start a new story.</h2>
 <br>
 <!--genre form commented out below, if it's needed -->
<!-- <%= render "new_genre_story_form", genre: @genre %> -->
  <%= render 'new_story_form', story: @story %>
</div>

<div class="other-stories-box">
   <h2> Add to a different story. </h2>
    <%if !@all_stories.nil?%>
      <%if !@all_stories.empty? %>
        <%= render "all_stories", :story => @all_stories.sample %>
      <%else%>
        <h3>None, yet!</h3>
        <% end %>
    <% end %>
</div>


<div class="your-stories-box">
  <h2>Your Stories</h2>
  <div class="your-stories-content">
    <%if @user_stories.empty?%>
      <h3>None, yet!</h3>
    <% else %>
      <%=render 'your_stories', :story => @user_stories.sample %>
      <br><button type="button" id="view-all-button">View All Stories</button>

      <!-- <%=render :collection => @user_stories.reverse, :partial => "your_stories", :as => :story %> -->
    <% end %>
  </div>
</div>

<div class="your-contributions-box">
<h2>Your Contributions</h2>
  <% if @user_contributions.size < 1 %>
      <p> None, yet! </p>
 <% else %>
    <%= render 'your_contributions', :sentence => @user_contributions.sample %>
 <% end %>
</div>

<!-- JS FOR APPENDING ALL STORIES --> 

<%=javascript_tag do %>
  var user = <%= @user.id %>
  <% end %>

<script type="text/javascript">
$(function() {
    $('#view-all-button').on('click', function() {
      var data = $.get('/users/' + user + '/stories.json');
      console.log(data);
    })


  })
</script>
